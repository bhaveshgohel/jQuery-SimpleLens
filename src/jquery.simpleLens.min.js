(function(c){function e(c){window.console&&console.log(c)}c.fn.simpleLens=function(l){var d=c.extend({},c.fn.simpleLens.defaults,l),g={init:function(b){this.height=b.height();this.width=b.width();this.offset=b.offset();this.position=b.position();this.calc_image_limits()},calc_image_limits:function(){this.limits={x_left:this.position.left,x_right:this.position.left+this.width,y_top:this.position.top,y_bottom:this.position.top+this.height}},calc_view_position:function(b,a,c){return{org_x:b.pageX-this.offset.left,
org_y:b.pageY-this.offset.top,rel_x:-1*((b.pageX-this.offset.left)*a.x-c.width),rel_y:-1*((b.pageY-this.offset.top)*a.y-c.height)}}},h={init:function(b,a,c){this.parent_anchor=b;this.lens_container=a;this.ratio=c;this.calc_cursor_size();this.insert_cursor()},destroy:function(){c("."+d.cursor_class).remove()},calc_cursor_size:function(){this.cursor_height=this.lens_container.height()/this.ratio.x;this.cursor_width=this.lens_container.width()/this.ratio.y;this.height_center=this.cursor_height/2;this.width_center=
this.cursor_width/2},update_cursor_position:function(b,a){var c=a-this.height_center,d=a+this.height_center,e=b-this.width_center,h=b+this.width_center,f=g.limits;parseFloat(f.y_top)>parseFloat(c)?c=f.y_top:parseFloat(d)>parseFloat(f.y_bottom)&&(c=f.y_bottom-this.cursor_height);parseFloat(f.x_left)>parseFloat(e)?e=f.x_left:parseFloat(h)>parseFloat(f.x_right)&&(e=f.x_right-this.cursor_width);void 0!==this.cursor&&this.cursor.css({top:c,left:e})},insert_cursor:function(b,a){this.cursor=c("<div>",{"class":d.cursor_class});
this.cursor.css({height:this.cursor_height+"px",width:this.cursor_width+"px"});this.cursor.appendTo(this.parent_anchor);this.update_cursor_position(b,a)}},k={init:function(b){this.parent_anchor=b;this.parent_div=b.parent(d.parent_class);this.lens_image_url=b.attr(d.lens_image_attr);this.lens_container=c("<div>",{"class":d.lens_class});this.lens_image=c("<img>");g.init(b.find(d.big_image_class));void 0===this.lens_image_url&&(e("Lens image url problem."),e(that),e(b),e(lens_image_url))},update_lens_position:function(b,
a){this.lens_image.css({top:a,left:b})},lens_event_bind:function(){var b=this;this.parent_anchor.mousemove(function(a){a=g.calc_view_position(a,b.ratio,b.container);b.update_lens_position(a.rel_x,a.rel_y);h.update_cursor_position(a.org_x,a.org_y)})},lens_event_unbind:function(){void 0!==this.parent_anchor&&this.parent_anchor.unbind("mousemove")},destroy:function(){h.destroy();0<c("."+d.lens_class).length&&(c("."+d.lens_class).remove(),this.lens_event_unbind())},load:function(b){var a=this;this.lens_container.appendTo(this.parent_div);
var e=this.lens_container.height()/2-25,e=c("<img>",{src:d.loading_image}).css("margin-top",e);this.lens_container.html(e);this.lens_image.load(function(){a.lens_container.html(a.lens_image);a.container={width:a.lens_container.width()/2,height:a.lens_container.height()/2};a.ratio={y:a.lens_image.height()/g.height,x:a.lens_image.width()/g.width};var c=g.calc_view_position(b,a.ratio,a.container);a.update_lens_position(c.rel_x,c.rel_y);h.init(a.parent_anchor,a.lens_container,a.ratio);a.lens_event_bind()}).attr("src",
this.lens_image_url)}};c(this).parents(d.parent_class).on(d.open_lens_event,d.anchor_parent_class,function(b){var a=c(this);k.init(a);k.load(b)});c(this).parents(d.parent_class).on("mouseleave",d.anchor_parent_class,function(){k.destroy()})};c.fn.simpleLens.ver=function(){return"simpleLens-1.0"};c.fn.simpleLens.defaults={anchor_parent_class:".lens-image",lens_image_attr:"data-lens-image",big_image_class:".big-image",parent_class:".big-image-container",lens_class:"lens-element",cursor_class:"mouse-cursor",
loading_image:"images/loading.gif",open_lens_event:"mouseenter"}})(jQuery);
